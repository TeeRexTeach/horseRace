<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horse Race Game</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body { font-family: Arial, sans-serif; background-color: #f9f9f9; margin: 0; padding: 20px; }
        h1 { text-align: center; color: #444; }
        .controls { margin-bottom: 20px; text-align: center; }
        .track { display: flex; flex-direction: column; gap: 20px; margin-bottom: 20px; }
        .lane { position: relative; display: flex; align-items: center; gap: 5px; }
        .horse { width: 30px; height: 30px; background-color: #ff6f61; border-radius: 50%; position: absolute; transition: left 0.3s ease; }
        .track-line { flex-grow: 1; height: 30px; background-color: #ddd; border-radius: 15px; position: relative; }
        .points { margin-left: 10px; font-weight: bold; }
        .group-name { font-weight: bold; margin-right: 10px; width: 150px; }
        button { padding: 10px 20px; margin: 5px; border: none; background-color: #5a9; color: white; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #478; }
    </style>
</head>
<body>
    <h1>Horse Race Game</h1>
    <div class="controls">
        <label>Number of Horses: <input type="number" id="numHorses" min="1" value="3"></label>
        <label>Track Length: <input type="number" id="trackLength" min="5" value="10"></label>
        <button onclick="initializeGame()">Start Game</button>
        <button onclick="resetGame()">Reset</button>
    </div>
    <div id="trackContainer" class="track"></div>
    <script>
        let horses = [];

        function initializeGame() {
            const trackContainer = document.getElementById('trackContainer');
            trackContainer.innerHTML = '';
            const numHorses = parseInt(document.getElementById('numHorses').value);
            const trackLength = parseInt(document.getElementById('trackLength').value);
            horses = Array.from({ length: numHorses }, (_, i) => ({ position: 0, points: 0, groupName: `Group ${i + 1}` }));
            
            horses.forEach((horse, index) => {
                const lane = document.createElement('div');
                lane.classList.add('lane');
                
                const groupNameInput = document.createElement('input');
                groupNameInput.classList.add('group-name');
                groupNameInput.value = horse.groupName;
                groupNameInput.oninput = (e) => horse.groupName = e.target.value;
                
                const moveButton = document.createElement('button');
                moveButton.textContent = `Move Horse ${index + 1}`;
                moveButton.onclick = () => moveHorse(index);
                
                const trackLine = document.createElement('div');
                trackLine.classList.add('track-line');
                
                const horseElem = document.createElement('div');
                horseElem.classList.add('horse');
                horseElem.id = `horse-${index}`;
                horseElem.style.left = '0';
                trackLine.appendChild(horseElem);
                
                const pointsDisplay = document.createElement('span');
                pointsDisplay.classList.add('points');
                pointsDisplay.id = `points-${index}`;
                pointsDisplay.textContent = 'Points: 0';
                
                lane.appendChild(groupNameInput);
                lane.appendChild(moveButton);
                lane.appendChild(trackLine);
                lane.appendChild(pointsDisplay);
                trackContainer.appendChild(lane);
            });
        }

        function moveHorse(index) {
            const trackLength = parseInt(document.getElementById('trackLength').value);
            const horse = horses[index];
            horse.position++;
            if (horse.position >= trackLength) {
                horse.position = 0;
                horse.points++;
                document.getElementById(`points-${index}`).textContent = `Points: ${horse.points}`;
            }
            renderHorses();
        }

        function renderHorses() {
            const trackLength = parseInt(document.getElementById('trackLength').value);
            horses.forEach((horse, index) => {
                const horseElem = document.getElementById(`horse-${index}`);
                const trackWidth = horseElem.parentElement.offsetWidth;
                const stepWidth = trackWidth / trackLength;
                horseElem.style.left = `${horse.position * stepWidth}px`;
            });
        }

        function resetGame() {
            initializeGame();
        }

        initializeGame();
    </script>
</body>
</html>
